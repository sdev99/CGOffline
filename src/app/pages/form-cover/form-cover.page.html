<ion-header mode="ios" *ngIf="signOffFormDetail">
  <app-modal-header
    [modalTitle]="'Form Details'"
    (closeModal)="onClose()"
  ></app-modal-header>

  <ion-item lines="none">
    <ion-label>
      <h6>{{signOffFormDetail?.formData?.formTitle}}</h6>

      <div class="form-text-row">
        <div class="title">Entity</div>
        <div class="value" *ngFor="let entity of signOffFormDetail?.entityList">
          {{entity.locationName}}
        </div>
      </div>

      <div class="form-text-row">
        <div class="title">Form Type</div>
        <div class="value">{{signOffFormDetail?.formData?.formType}}</div>
      </div>

      <div class="rejected-view" *ngIf="signOffFormDetail?.formData.isRejected">
        <div class="detail">
          <ion-icon slot="start" src="./assets/icon/rejected.svg"></ion-icon>
          <ion-label class="rejected">Signature Rejected</ion-label>
        </div>

        <p
          class="time"
          *ngIf="signOffFormDetail?.formData.formattedRejectedDate;"
        >
          by {{signOffFormDetail?.formData?.rejectedBy}} on
          {{signOffFormDetail?.formData.formattedRejectedDate}}
        </p>

        <div class="reject-reason">
          <h3>Rejection Reason</h3>
          <p>{{signOffFormDetail?.formData.rejectedReason}}</p>
        </div>
      </div>
    </ion-label>
  </ion-item>
</ion-header>

<ion-content class="ion-padding-horizontal" fullscreen="true">
  <div class="content-container" *ngIf="signOffFormDetail">
    <ion-item
      lines="full"
      class="title-item"
      *ngIf="signOffFormDetail?.formData?.formattedDescription || signOffFormDetail?.formData?.formattedInstructions"
    >
      <ion-label class="ion-text-wrap">
        <p
          *ngIf="signOffFormDetail?.formData?.formattedDescription"
          [innerHTML]="sanitizer.bypassSecurityTrustHtml(signOffFormDetail?.formData?.formattedDescription)"
        ></p>

        <ng-container
          *ngIf="signOffFormDetail?.formData?.formattedInstructions"
        >
          <h6>Explanation</h6>
          <p
            [innerHTML]="sanitizer.bypassSecurityTrustHtml(signOffFormDetail?.formData?.formattedInstructions)"
          ></p>
        </ng-container>
      </ion-label>
    </ion-item>

    <div
      class="ion-margin-top"
      *ngIf="signOffFormDetail && signOffFormDetail.formAttachments"
    >
      <ion-item
        lines="none"
        class="form-item"
        (click)="openFile(attachmentItem)"
        *ngFor="let attachmentItem of signOffFormDetail.formAttachments"
      >
        <ion-img
          slot="start"
          [src]="attachmentItem.documentFileIconURL"
        ></ion-img>
        <ion-label>{{attachmentItem.documentFileName}}</ion-label>
      </ion-item>
    </div>

    <div class="fill-vertical-space"></div>

    <ion-footer mode="ios">
      <ion-button expand="full" class="action-btn" (click)="onContinue()"
        >Launch the Form</ion-button
      >
    </ion-footer>
  </div>
</ion-content>
